https://access.redhat.com/solutions/9892


Quick Answer: To configure Red Hat‚Äôs openrepo (local repository) for updates, you need to create a local repository using createrepo or dnf reposync, configure .repo files under /etc/yum.repos.d/, and ensure the repository metadata is updated regularly so systems can pull updates from it.
üîß Step-by-Step Guide to Configure OpenRepo for Updates
1. Install Required Tools
‚Ä¢	Install createrepo and dnf-plugins-core (or yum-utils on older RHEL):
bash
sudo dnf install createrepo_c dnf-plugins-core -y
These provide createrepo and reposync commands.
2. Sync Packages from Red Hat Repositories
‚Ä¢	Use reposync to download packages from Red Hat repositories:
bash
sudo reposync -n -p /var/www/html/repo --download-metadata --repoid=rhel-9-for-x86_64-baseos-rpms
Replace repoid with the repository you want (e.g., BaseOS, AppStream).
3. Create Repository Metadata
‚Ä¢	Run createrepo to generate metadata:
bash
sudo createrepo /var/www/html/repo
4. Configure Local Repo File
‚Ä¢	Create a .repo file under /etc/yum.repos.d/local.repo:
ini
[local-rhel9]
name=Local RHEL 9 Repo
baseurl=http://yourserver/repo/
enabled=1
gpgcheck=0
o	baseurl points to your repo location (HTTP, FTP, or file path).
o	Disable gpgcheck if you don‚Äôt have GPG keys configured.
5. Update Repository Regularly
‚Ä¢	Schedule a cron job to run reposync and createrepo periodically:
bash
0 2 * * * /usr/bin/reposync -n -p /var/www/html/repo --download-metadata --repoid=rhel-9-for-x86_64-baseos-rpms && /usr/bin/createrepo /var/www/html/repo
This ensures your local repo stays updated.
6. Test Updates
‚Ä¢	Run:
bash
sudo dnf clean all
sudo dnf update
Your system should now pull updates from the configured local repository.
‚ö†Ô∏è Key Considerations
‚Ä¢	Subscription Access: You must have a valid Red Hat subscription to sync packages from Red Hat CDN.
‚Ä¢	Bandwidth & Storage: Repos can be large; ensure sufficient disk space.
‚Ä¢	Security: If serving via HTTP, secure the repo with proper permissions and firewall rules.
‚úÖ With this setup, your openrepo acts as a mirror for Red Hat updates, allowing controlled and bandwidth-efficient patching across multiple systems.
Would you like me to also show you how to configure multiple repositories (BaseOS, AppStream, Extras) together so updates cover all RHEL components?

